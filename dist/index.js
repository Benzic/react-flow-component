!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.laputarednerer=e(require("react")):t.laputarednerer=e(t.react)}(window,(function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1);Object.defineProperty(e,"MultipleFlow",{enumerable:!0,get:function(){return n.default}})},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.hasOwnProperty.call(t,i)&&n(e,t,i);return o(e,t),e},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const l=s(i(2)),h=i(3),a=r(i(5));i(7);const c=l.forwardRef(({flowNodes:t=[],flowLines:e=[],rectConfig:i,lineConfig:n,gradConfig:o,cref:s,onChange:r,onConnect:c,onDBClick:d,onChangePosition:u})=>{const f=l.useRef(null),v=l.useRef(null),g=l.useRef(null),x=new a.default(t=>{g.current.resize(t[0].contentRect)});return l.useImperativeHandle(s,()=>({flow:g.current})),l.useEffect(()=>{x.observe(v.current),g.current=new h.Flow({flowNodes:t,canvas:f.current,wrapper:v.current,rectConfig:i,lineConfig:n,flowLines:e,gradConfig:o,onChange:r,onConnect:c,onDBClick:d,onChangePosition:u})},[]),l.useEffect(()=>{g.current.nodes=t,g.current.resetValues()},[t]),l.useEffect(()=>{g.current.lines=e},[e]),l.default.createElement("div",{ref:v,style:{width:"100%",height:"100%",position:"relative"}},l.default.createElement("canvas",{ref:f,id:"canvas"}))});e.default=c},function(e,i){e.exports=t},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Flow=void 0;const o=n(i(4)),s=new Image;s.src=o.default;e.Flow=class{constructor({flowNodes:t,flowLines:e,canvas:i,wrapper:n,rectConfig:o,lineConfig:s,gradConfig:r,onChange:l,onConnect:h,onDBClick:a,onChangePosition:c}){this.selectArea={startX:0,startY:0,endX:0,endY:0},this.activeLines=[],this.moveLine=null,this.activeKey=null,this.lastMouseUpTime=0,this.editLine=null,this.activeTool=null,this.mouseDownXY={x:0,y:0},this.translateX=0,this.translateY=0,this.singleClick=!0,this.cancelDBClick=!1,this.leftMouseDown=!1,this.drawElement=null,this.drawLineModel=!1,this.lineFromNodeKey=null,this.throttle=(t,e=500)=>{let i=!0;const n=e;return function(...e){i&&(t.apply(this,e),i=!1,setTimeout(()=>{i=!0},n))}},this.onListenKeyDown=()=>{window.onkeydown=t=>{var e;46===t.keyCode&&((null===(e=this.activeLines)||void 0===e?void 0:e.length)&&this.deleLine(),this.activeKey&&this.deleRect(),this.render()),17===t.keyCode&&(window.document.body.style.cursor="move")}},this.onListenKeyUp=()=>{window.onkeyup=t=>{17===t.keyCode&&(window.document.body.style.cursor="inherit")}},this.onConectLine=(t,e)=>{const i=this.getRectIndex(this.lineFromNodeKey)||0,{height:n=0}=this.rectCfg,{width:o}=this.lineCfg;this.render(),this.drawLine({sx:this.nodes[i].x+this.translateX,sy:this.nodes[i].y+this.translateY,x:t,y:e,_w:o,_h:n/2})},this.onMoveNode=(t,e,i)=>{var n,o;const{xCorrecting:s=10,yCorrecting:r=5}=this.rectCfg,{move:l}=this.lineCfg,{lines:h}=this;if(this.nodes[i].active){const a=(t-this.translateX)/s,c=(e-this.translateY)/r,d=Math.floor(a)*s,u=Math.floor(c)*r;this.nodes[i].x=d,this.nodes[i].y=u;for(let t=0;t<=(null==h?void 0:h.length)-1;t++){const{turnPoints:e,fromNode:s,toNode:r}=h[t];let a=this.cloneObject(e);if(h[t].fromNode===this.nodes[i].key&&(a[0].x=d,!l)){const t=null!==(n=this.getRectIndex(r))&&void 0!==n?n:0;a[0].y=this.nodes[i].y+(this.nodes[t].y-this.nodes[i].y)/2,a[1].y=this.nodes[i].y+(this.nodes[t].y-this.nodes[i].y)/2}if(h[t].toNode===this.nodes[i].key&&(a[1].x=d,!l)){const t=null!==(o=this.getRectIndex(s))&&void 0!==o?o:0;a[0].y=this.nodes[t].y+(this.nodes[i].y-this.nodes[t].y)/2,a[1].y=this.nodes[t].y+(this.nodes[i].y-this.nodes[t].y)/2}h[t]=Object.assign(Object.assign({},h[t]),{turnPoints:a})}this.lines=h}this.render()},this.onConnectLine=(t,e,i)=>{const{height:n=0}=this.rectCfg,{width:o}=this.lineCfg,{translateX:s,translateY:r}=this;this.render(),this.drawLine({sx:this.nodes[i].x+s,sy:this.nodes[i].y+r,x:t,y:e,_w:o,_h:n/2})},this.cloneObject=t=>JSON.parse(JSON.stringify(t)),this.onListenMouseMove=t=>{var e,i;let n=null!==(e=null==t?void 0:t.clientX)&&void 0!==e?e:0,o=null!==(i=null==t?void 0:t.clientY)&&void 0!==i?i:0;this.canvas.onmousemove=t=>{var e,i,s;const{clientX:r,clientY:l,ctrlKey:h,offsetX:a,offsetY:c}=t;if(this.drawLineModel)this.onConectLine(a,c);else{const{leftMouseDown:t,activeKey:d,lineCfg:u,lines:f,moveLine:v}=this;if(t){if(h){const t=r-n,i=l-o;n=r,o=l,this.translateX+=t,this.translateY+=i,null===(e=this.onChangePosition)||void 0===e||e.call(this,{translateX:this.translateX,translateY:this.translateY}),this.render()}if(!h)if(null!==d){const t=null!==(i=this.getRectIndex(d))&&void 0!==i?i:0;this.singleClick?this.onMoveNode(a,c,t):this.onConnectLine(a,c,t)}else{const{move:t}=u;if(v&&t){for(let t=0;t<=f.length-1;t++){const{turnPoints:e,fromNode:i,toNode:n}=f[t],{fromNode:o,toNode:s}=v;if((null==e?void 0:e.length)&&i===o&&n===s){let i=this.cloneObject(e);i[0].y=c-this.translateY,i[1].y=c-this.translateY,f[t]=Object.assign(Object.assign({},f[t]),{turnPoints:i});break}}this.lines=f,null===(s=this.onChange)||void 0===s||s.call(this,{lines:this.lines,nodes:this.nodes}),this.render()}else this.selectArea.startX=this.mouseDownXY.x-this.translateX,this.selectArea.startY=this.mouseDownXY.y-this.translateY,this.selectArea.endX=a-this.translateX,this.selectArea.endY=c-this.translateY,this.render(),this.dragSelect(this.mouseDownXY.x,this.mouseDownXY.y,a,c)}}else{const{move:t}=u;t&&this.findLinesInCanvas(a,c)}}}},this.onConectNode=(t,e)=>{var i,n,o,s,r,l,h,a;const{levelLimit:c}=this.lineCfg;let d=null===(i=this.nodes)||void 0===i?void 0:i[t],u=null===(n=this.nodes)||void 0===n?void 0:n[e];const f=null!==(o=null==d?void 0:d.level)&&void 0!==o?o:0,v=null!==(s=null==u?void 0:u.level)&&void 0!==s?s:0;if(d.key===u.key)return;if(c&&this.onConnect&&!(null===(r=this.onConnect)||void 0===r?void 0:r.call(this,{FNode:d,ENode:u})))return;if(c&&v<f)return;if(this.lines.find(t=>t.toNode===u.key&&t.fromNode===d.key))return;const g=(d.y-(null==u?void 0:u.y))/2;this.lines=[...this.lines,{fromNode:d.key,toNode:u.key,data:{},turnPoints:[{x:d.x,y:d.y-g},{x:null==u?void 0:u.x,y:(null==u?void 0:u.y)+g}]}],d=(null===(l=d.toNodes)||void 0===l?void 0:l.length)?Object.assign(Object.assign({},d),{toNodes:[...null==d?void 0:d.toNodes,null==u?void 0:u.key]}):Object.assign(Object.assign({},d),{toNodes:[null==u?void 0:u.key]}),u=(null===(h=u.fromNodes)||void 0===h?void 0:h.length)?Object.assign(Object.assign({},u),{fromNodes:[...null==u?void 0:u.fromNodes,null==d?void 0:d.key]}):Object.assign(Object.assign({},u),{fromNodes:[null==d?void 0:d.key]}),this.nodes[t]=d,this.nodes[e]=u,null===(a=this.onChange)||void 0===a||a.call(this,{lines:this.lines,nodes:this.nodes})},this.onListenMouseUp=()=>{window.onmouseup=t=>{var e;const{buttons:i}=t;if(1!==i&&(this.leftMouseDown=!1),!this.drawLineModel){const{offsetX:i,offsetY:n}=t,{activeKey:o,lastMouseUpTime:s,mouseDownXY:r,translateX:l,translateY:h}=this,{x:a,y:c}=r;if(Math.abs(a-i)>10||Math.abs(c-n)>10?this.cancelDBClick=!0:this.cancelDBClick=!1,null!==o){const t=this.findRectInCanvas(i-l,n-h),s=null!==(e=this.getRectIndex(o))&&void 0!==e?e:0;t&&(null==t?void 0:t.key)!==o&&this.onConectNode(s,null==t?void 0:t.index),this.render()}else{const t=(new Date).valueOf()-s.valueOf()>150;null===o&&t&&this.findLineInCanvas(),this.render()}}}},this.onDragRect=t=>{this.onListenMouseMove(t),this.onListenMouseUp()},this.onListenOnMouseDown=()=>{this.canvas.onmousedown=t=>{this.activeKey=null;const{offsetX:e,offsetY:i,buttons:n,ctrlKey:o}=t;if(this.leftMouseDown=1===n,this.drawLineModel){const n=this.findRectInCanvas(e-this.translateX,i-this.translateY);if(n)if(this.lineFromNodeKey){const t=this.lineFromNodeKey,e=this.getRectIndex(t);this.onConectNode(e,null==n?void 0:n.index),this.lineFromNodeKey=null,this.activeKey=null,this.canvas.onmousemove=null,this.render()}else this.lineFromNodeKey=null==n?void 0:n.key,this.onListenMouseMove(t);else this.canvas.onmousemove=null,this.lineFromNodeKey=null,this.render()}else if(o)this.onListenMouseMove(t);else{const n=this.findRectInCanvas(e-this.translateX,i-this.translateY),{lastMouseUpTime:o}=this;if(o){const t=(new Date).valueOf()-o.valueOf()<250;this.singleClick=!t}if(this.lastMouseUpTime=(new Date).getTime(),this.mouseDownXY.x=e,this.mouseDownXY.y=i,n){this.activeKey=null==n?void 0:n.key,this.editLine=null,this.activeLines=[];const t=this.getRectIndex(null==n?void 0:n.key),e=this.nodes[t];e&&(this.nodes.splice(t,1),this.nodes.push(Object.assign(Object.assign({},e),{active:!0})),this.render())}this.onDragRect(t)}}},this.render=()=>{var t,e;this.ctx&&(this.ctx.clearRect(0,0,null===(t=this.canvas)||void 0===t?void 0:t.width,null===(e=this.canvas)||void 0===e?void 0:e.height),this.ctx.save(),this.ctx.translate(this.translateX,this.translateY),this.gradConfig&&this.drawDrid(),this.initCanvas(),this.ctx.restore())},this.drawNodeInCanvas=t=>{var e,i,n,o;const{nodes:s,rectCfg:r,activeKey:l}=this,{width:h=0,height:a=0,corner:c=0,bgImg:d,activeBgColor:u,bgColor:f,tool:v,textAlign:g,txtColor:x,textMargin:y,shadowBlur:w,shadowColor:p,textEllipsis:b}=r,C=s[t],m=null!==(e=C.tool)&&void 0!==e?e:v;this.drawRoundedRect({x:C.x,y:C.y,r:null!==(i=C.corner)&&void 0!==i?i:c,active:l===C.key,bgImg:null!==(n=C.bgImg)&&void 0!==n?n:d,hWidth:h/2,hHeight:a/2,bgColor:f,aBgColor:u,shadowBlur:w,shadowColor:p}),this.drawText({x:C.x,y:C.y,margin:y,align:g,title:C.name,active:l===C.key,hWidth:h/2,txtColor:x,r:null!==(o=C.corner)&&void 0!==o?o:c,textEllipsis:b}),m&&this.drawTool(m,C)},this.drawTool=(t,e)=>{const{x:i,y:n}=e,{bgImg:o,title:s,x:r,y:l,corner:h=0,width:a=0,height:c=0}=t,d=i+r,u=n+l,f=a/2,v=c/2;o?this.drawImage(o,d,u,f,v):this.drawRoundedRect({x:d,y:u,r:h,active:!1,hWidth:f,hHeight:v,bgColor:null==t?void 0:t.bgColor,aBgColor:null==t?void 0:t.activeBgColor,shadowColor:null==t?void 0:t.shadowColor,shadowBlur:null==t?void 0:t.shadowBlur}),s&&this.drawText({x:d,y:u,title:s,active:!1,hWidth:f,r:h})},this.drawLineInCanvas=t=>{var e;const{nodes:i,activeLines:n,rectCfg:o,lineCfg:s}=this,{height:r=0}=o,{width:l,label:h}=s,a=this.lines,c=this.getRectIndex(a[t].fromNode),d=this.getRectIndex(a[t].toNode),u=i[c],f=i[d];if(u&&f){let i=a[t].turnPoints;const o=n.find(t=>{const{fromNode:e,toNode:i}=t;return e===u.key&&i===f.key});let s=!1;if(this.editLine){const{fromNode:t,toNode:e}=this.editLine;s=t===u.key&&e===f.key}(null===(e=a[t].turnPoints)||void 0===e?void 0:e.length)||(i=[{x:u.x,y:u.y+(f.y-u.y)/2},{x:f.x,y:u.y+(f.y-u.y)/2}],a[t].turnPoints=i),this.lines=a,this.drawLines({start:u,turnPoints:i,end:f,_w:l,_h:r/2,active:!!o,aColor:s?"red":"orange",label:h}),this.dragTriangle({sy:i[i.length-1].y,x:f.x,y:f.y,_w:l,_h:r/2,_xDev:2.5*(null!=l?l:2),active:!!o,aColor:s?"red":"orange"})}},this.getXY=t=>{switch(t.length){case 1:return{x:t[0],x2:t[0],y:t[0],y2:t[0]};case 2:return{x:t[1],x2:t[1],y:t[0],y2:t[0]};case 3:return{x:t[1],x2:t[1],y:t[0],y2:t[2]};case 4:return{x:t[3],x2:t[1],y:t[0],y2:t[2]};default:return{x:0,x2:0,y:0,y2:0}}},this.ctx=i.getContext("2d"),this.nodes=t,this.canvas=i,this.wrapper=n,this.lines=null!=e?e:[],this.lineCfg=null!=s?s:{},this.rectCfg=null!=o?o:{},this.gradConfig=null!=r?r:{},this.onDBClick=a,this.onConnect=h,this.onChange=l,this.onChangePosition=c,this.resetValues(),this.initListenEvent()}resetValues(){this.singleClick=!0,this.cancelDBClick=!1,this.leftMouseDown=!1,this.mouseDownXY={x:0,y:0},this.editLine=null,this.lastMouseUpTime=0,this.activeKey=null,this.activeLines=[],this.lineFromNodeKey=null,this.selectArea={startX:0,startY:0,endX:0,endY:0},this.render()}initListenEvent(){this.createResetBtn(),this.createLineBtn(),this.onListenKeyDown(),this.onListenKeyUp(),this.onListenOnMouseDown(),this.onListenDBClick(),this.onListenMouseMove()}onListenDBClick(){this.canvas.ondblclick=t=>{var e,i;if(this.cancelDBClick)this.cancelDBClick=!1;else{const{offsetY:n,offsetX:o}=t,{translateX:s,translateY:r}=this;this.findToolInCanvas(o-s,n-r),this.activeTool&&this.onDBClick&&this.onDBClick({type:"tool",node:this.activeTool});const l=this.findRectInCanvas(o-s,n-r);this.mouseDownXY.x=o-s,this.mouseDownXY.y=n-r,this.findEditLine(),l&&(null===(e=this.onDBClick)||void 0===e||e.call(this,{node:l,type:"node"})),this.editLine&&(null===(i=this.onDBClick)||void 0===i||i.call(this,{type:"line",node:this.editLine}))}}}createResetBtn(){const t=window.document.createElement("div");t.innerHTML="<div>还原</div>",t.setAttribute("class","flow-reset-btn flow-btn"),t.onclick=()=>{this.resetPosition()},this.wrapper.appendChild(t)}createLineBtn(){const t=window.document.createElement("div");t.innerHTML="<div>画线</div>",t.setAttribute("class","flow-line-btn flow-btn"),t.onclick=()=>{this.onDrawLine()},this.drawElement=t,this.wrapper.appendChild(t)}onDrawLine(){this.drawElement&&(this.drawLineModel?(this.drawElement.innerHTML="<div>画线</div>",this.drawLineModel=!1):(this.drawElement.innerHTML="<div>取消</div>",this.drawLineModel=!0))}resize(t){this.canvas.width=t.width,this.canvas.height=t.height,this.render()}resetPosition(){this.translateX=0,this.translateY=0,this.render()}getRectIndex(t){var e;let i=0;const{nodes:n}=this;for(let o=0;o<=(null==n?void 0:n.length)-1;o++)if((null===(e=n[o])||void 0===e?void 0:e.key)===t)return i=o,i;return i}initCanvas(){const{nodes:t,ctx:e,lines:i}=this;if(e&&t){for(let t=0;t<=(null==i?void 0:i.length)-1;t++)this.drawLineInCanvas(t);for(let e=0;e<=(null==t?void 0:t.length)-1;e++)this.drawNodeInCanvas(e)}}deleLine(){var t;let{nodes:e,activeLines:i}=this;for(let t=0;t<=(null==i?void 0:i.length)-1;t++){const{lines:n}=this,{toNode:o,fromNode:s}=i[t];this.lines=n.filter(t=>!(t.fromNode===s&&t.toNode===o));for(let t=0;t<=(null==e?void 0:e.length)-1;t++){const{toNodes:i,fromNodes:n,key:r}=e[t];if((null==i?void 0:i.includes(o))&&r===s||(null==n?void 0:n.includes(s))&&r===o){let r=i.filter(t=>t!==o),l=null==n?void 0:n.filter(t=>t!==s);e[t]=Object.assign(Object.assign({},e[t]),{toNodes:r,fromNodes:l})}}}this.nodes=e,null===(t=this.onChange)||void 0===t||t.call(this,{lines:this.lines,nodes:this.nodes}),this.activeLines=[]}deleRect(){var t,e,i;const{nodes:n,lines:o}=this;for(let i=0;i<=(null==n?void 0:n.length)-1;i++)n[i].toNodes=n[i].toNodes.filter(t=>t!==this.activeKey),n[i].fromNodes=null===(e=null===(t=n[i])||void 0===t?void 0:t.fromNodes)||void 0===e?void 0:e.filter(t=>t!==this.activeKey),this.lines=o.filter(t=>t.fromNode!==this.activeKey&&t.toNode!==this.activeKey);const s=this.getRectIndex(this.activeKey);n.splice(s,1),this.nodes=n,null===(i=this.onChange)||void 0===i||i.call(this,{lines:this.lines,nodes:this.nodes}),this.activeKey=null}findToolInCanvas(t,e){var i,n;let o=null;const{nodes:s}=this,{tool:r}=this.rectCfg;for(let l=(null==s?void 0:s.length)-1;l>=0;l--){const h=null!==(n=null===(i=s[l])||void 0===i?void 0:i.tool)&&void 0!==n?n:r;if(h){const{x:i=0,y:n=0,corner:r=0,width:a=0,height:c=0}=h,d=s[l].x+i-t,u=s[l].y+n-e,f=a/2,v=c/2,g=Math.sqrt(Math.pow(d,2)+Math.pow(u,2)),x=Math.sqrt(Math.pow(f-r,2)+Math.pow(v-r,2))+r;if(console.log(g,x),g<x){o={point:s[l],key:s[l].key};break}}}this.activeTool=o,console.log(o)}findRectInCanvas(t,e){var i;const{nodes:n,rectCfg:o}=this,{width:s=0,height:r=0,corner:l}=o,h=s/2||50,a=r/2||15;for(let o=(null==n?void 0:n.length)-1;o>=0;o--){const s=n[o].corner?null!==(i=n[o].corner)&&void 0!==i?i:0:null!=l?l:0,r=Math.sqrt(Math.pow(n[o].x-t,2)+Math.pow(n[o].y-e,2)),c=Math.sqrt(Math.pow(h-s,2)+Math.pow(a-s,2))+s;if(t<n[o].x+h&&t>n[o].x-h&&e<n[o].y+a&&e>n[o].y-a&&r<c)return{point:n[o],key:n[o].key,index:o}}}findLeftRightLine(t,e,i){const{startY:n,endY:o,endX:s,startX:r}=this.selectArea,l=t<s&&t>r;if(e>i){if(e>o&&i<n)return l&&!0}else if(i>o&&e<n)return l&&!0;return(e>n&&e<o||i>n&&i<o)&&l&&!0}findLeftRightLines(t,e,i){const{startY:n,endY:o,endX:s,startX:r}=this.selectArea,l=t<s&&t>r;if(e>i){if(e>o&&i<n)return l&&!0}else if(i>o&&e<n)return l&&!0;return(e>n&&e<o||i>n&&i<o)&&l&&!0}findCenterLine(t,e,i){const{startY:n,endY:o,endX:s,startX:r}=this.selectArea,l=e<o&&e>n;return t>r&&t<s||i>r&&i<s?l&&!0:(t<r&&i>r||i>s&&t<s)&&l&&!0}findEditLine(){var t,e,i,n,o;this.editLine=null;const{x:s,y:r}=this.mouseDownXY;console.log(this.activeLines);for(let l=0;l<=(null===(t=this.activeLines)||void 0===t?void 0:t.length)-1;l++){let t=null!==(i=null===(e=this.activeLines[l])||void 0===e?void 0:e.x)&&void 0!==i?i:0,h=null!==(o=null===(n=this.activeLines[l])||void 0===n?void 0:n.y)&&void 0!==o?o:0;s>t-20&&s<t+20&&r>h-5&&r<h+5&&(this.editLine=this.activeLines[l])}this.render()}findLinesInCanvas(t,e){var i,n;const{lines:o}=this;this.moveLine=null;for(let s=0;s<=o.length-1;s++){const{turnPoints:r}=o[s];if(r){const l=(null===(i=r[0])||void 0===i?void 0:i.y)+5>e&&(null===(n=r[0])||void 0===n?void 0:n.y)-5<e,h=r[0].x<t&&r[1].x>t,a=r[0].x>t&&r[1].x<t,c=r[1].x>r[0].x?l&&h:l&&a;if(l&&c){this.moveLine=o[s];break}}}this.render()}findLineInCanvas(){var t,e;const{nodes:i,rectCfg:n,lines:o}=this,{height:s}=n;this.activeLines=[],this.editLine=null;for(let n=(null==o?void 0:o.length)-1;n>=0;n--){let s,r,l;const h=this.getRectIndex(o[n].fromNode),a=this.getRectIndex(o[n].toNode),c=i[h],d=i[a],{turnPoints:u}=o[n],f=null!==(e=null===(t=null==u?void 0:u[0])||void 0===t?void 0:t.y)&&void 0!==e?e:0,v=c.x,g=c.y,x=d.x,y=d.y;if(v<x?(s=this.findLeftRightLine(v,g,f),l=this.findCenterLine(v,f,x),r=this.findLeftRightLine(x,y,f)):(s=this.findLeftRightLine(x,y,f),l=this.findCenterLine(x,f,v),r=this.findLeftRightLine(v,g,f)),s||l||r){let t=v<x?v+(x-v)/2:x+(v-x)/2;this.activeLines.push(Object.assign(Object.assign({},o[n]),{x:t,y:f}))}}this.render()}drawText({x:t=0,y:e=0,title:i="",active:n=!1,hWidth:o=50,txtColor:s="black",aTextColor:r="black",fontSize:l="11px",margin:h=[0,0,0,0],align:a="center",r:c=5,textEllipsis:d=!1}){if(this.ctx){this.ctx.fillStyle=s,this.ctx.font=l+" Calibri";let c=0,u=0,f=0,v="";const g=null==this?void 0:this.getXY(h);let x=Math.abs(null==g?void 0:g.x)+Math.abs(null==g?void 0:g.x2),y=null==i?void 0:i.toString();if(o&&d)for(let t=0;t<=(null==y?void 0:y.length)-1;t++){x+=this.ctx.measureText(y[t]).width,x<2*o-(null==g?void 0:g.x)-(null==g?void 0:g.x2)?(f++,v=y.substring(0,f)):v=y.substring(0,f)+"..."}else v=y;const w=this.ctx.measureText(v).width;"center"===a?c=t-w/2+(null==g?void 0:g.x)-(null==g?void 0:g.x2):"left"===a?c=t+(null==g?void 0:g.x)-(null==g?void 0:g.x2):"right"===a&&(c=t+w+(null==g?void 0:g.x)-(null==g?void 0:g.x2)),n&&(this.ctx.fillStyle=r),u=e+(null==g?void 0:g.y)-(null==g?void 0:g.y2),this.ctx.fillText(v,c,u)}}drawLines({start:t,turnPoints:e,end:i,active:n=!1,_h:o=15,_w:r=2,color:l="#50a9ff",aColor:h="orange",label:a}){var c,d;if(this.ctx){this.ctx.save(),this.ctx.beginPath();let u=t;t.y>i.y?this.ctx.lineTo(t.x,t.y-o):this.ctx.lineTo(t.x,t.y+o);for(let t=0;t<=(null==e?void 0:e.length)-1;t++)u=e[t];t.key===(null===(c=this.moveLine)||void 0===c?void 0:c.fromNode)&&i.key===(null===(d=this.moveLine)||void 0===d?void 0:d.toNode)&&this.drawImage(s,u.x+(e[0].x-u.x)/2,u.y+(e[0].y-u.y)/2,5,5),this.ctx.lineTo(e[0].x,e[0].y),this.ctx.lineTo(e[1].x,e[1].y),t.y>i.y?this.ctx.lineTo(i.x,i.y+o):this.ctx.lineTo(i.x,i.y-o),this.ctx.lineWidth=r,this.ctx.strokeStyle=l,n&&(this.ctx.strokeStyle=h),this.ctx.stroke(),this.ctx.restore(),a&&n&&this.drawLinesRect(e[0].x,e[0].y,e[1].x,e[1].y)}}drawLinesRect(t,e,i,n){const{lineCfg:o}=this,{label:s}=o;if(s){const{width:n=0,height:o=0,title:r="",bgColor:l="red",corner:h=0,bgImg:a,shadowBlur:c,shadowColor:d,textMargin:u,textAlign:f,txtColor:v,aTextColor:g,fontSize:x}=s,y=Math.abs((t-i)/2),w=t>i?i+y:t+y;a?this.drawImage(a,w,e,n,o):this.drawRoundedRect({x:w,y:e,r:h,hWidth:n,hHeight:o,bgColor:l,shadowBlur:c,shadowColor:d}),r&&this.drawText({x:w,y:e+5,title:r,hWidth:n,r:h,align:f,margin:u,txtColor:v,aTextColor:g,fontSize:x})}}drawLine({sx:t=0,sy:e=0,x:i=0,y:n=0,active:o=!1,_h:s=15,_w:r=2,color:l="#50a9ff",aColor:h="orange",label:a}){this.ctx&&(this.ctx.save(),this.ctx.beginPath(),e>n&&e>n+s+30||e<n&&e<n-s-30?(e>n?this.ctx.moveTo(t,e-s):this.ctx.moveTo(t,e+s),this.ctx.lineTo(t,e+(n-e)/2),this.ctx.lineTo(i,e+(n-e)/2)):(e>n?this.ctx.moveTo(t,e+s):this.ctx.moveTo(t,e-s),this.ctx.lineTo(t,e+(e>n?30:-30)),this.ctx.lineTo(i,e+(e>n?30:-30))),e>n?this.ctx.lineTo(i,n+s):this.ctx.lineTo(i,n-s),this.ctx.lineWidth=r,this.ctx.strokeStyle=l,o&&(this.ctx.strokeStyle=h),this.ctx.stroke(),this.ctx.restore(),a&&o&&this.drawLineRect(t,e,i,n))}dragTriangle({sy:t=0,x:e=0,y:i=0,_w:n=2,_h:o=15,_xDev:s=5,color:r="#50a9ff",aColor:l="orange",active:h=!1}){if(this.ctx){const a=Math.sqrt(Math.pow(2*s,2)-Math.pow(s,2));this.ctx.save(),this.ctx.beginPath(),this.ctx.fillStyle=r,h&&(this.ctx.fillStyle=l),this.ctx.moveTo(e,i-(t-i>0?-o:o)),this.ctx.lineTo(e-s,i-(t-i>0?-o-a:o+a)),this.ctx.lineTo(e+s,i-(t-i>0?-o-a:o+a)),this.ctx.lineTo(e,i-(t-i>0?-o:o)),this.ctx.lineWidth=n,this.ctx.closePath(),this.ctx.fill(),this.ctx.restore()}}drawLineRect(t,e,i,n){const{lineCfg:o}=this,{label:s}=o;if(s){const{width:o=0,height:r=0,title:l="",bgColor:h="",corner:a=0,bgImg:c,shadowBlur:d,shadowColor:u,textMargin:f,textAlign:v,txtColor:g,aTextColor:x,fontSize:y}=s,w=Math.abs((t-i)/2),p=t>i?i+w:t+w,b=r/2+30;let C=0;C=e>n&&e>n+b||e<n&&e<n-b?e+(n-e)/2:e+(e>n?30:-30),c?this.drawImage(c,p,C,o,r):this.drawRoundedRect({x:p,y:C,r:a,hWidth:o,hHeight:r,bgColor:h,shadowBlur:d,shadowColor:u}),l&&this.drawText({x:p,y:C,title:l,hWidth:o,r:a,align:v,margin:f,txtColor:g,aTextColor:x,fontSize:y})}}drawRoundedRect({x:t=0,y:e=0,r:i=0,active:n=!1,bgImg:o,hWidth:s=50,hHeight:r=15,shadowBlur:l,shadowColor:h="rgba(0,0,0,0.3)",bgColor:a="white",aBgColor:c="#50a9ff"}){this.ctx&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(t-s+i,e-r),this.ctx.lineTo(t+s-i,e-r),this.ctx.arcTo(t+s,e-r,t+s,e+i,i),this.ctx.lineTo(t+s,e+r-i),this.ctx.arcTo(t+s,e+r,t+s-i,e+r,i),this.ctx.lineTo(t-s+i,e+r),this.ctx.arcTo(t-s,e+r,t-s,e+r-i,i),this.ctx.lineTo(t-s,e-r+i),this.ctx.arcTo(t-s,e-r,t-s+i,e-r,i),l&&(this.ctx.shadowBlur=l),l&&(this.ctx.shadowColor=h),!n&&(this.ctx.fillStyle=a),n&&(this.ctx.fillStyle=c),this.ctx.fill(),this.ctx.closePath(),this.ctx.restore(),o&&this.drawImage(o,t,e,s,r))}drawImage(t,e=0,i=0,n=50,o=15){this.ctx&&t&&this.ctx.drawImage(t,e-n,i-o,2*n,2*o)}dragSelect(t=0,e=0,i=0,n=0){this.ctx&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.setLineDash([8,8]),this.ctx.moveTo(t,e),this.ctx.lineTo(i,e),this.ctx.lineTo(i,n),this.ctx.lineTo(t,n),this.ctx.lineTo(t,e),this.ctx.lineWidth=2,this.ctx.strokeStyle="#999",this.ctx.closePath(),this.ctx.stroke(),this.ctx.restore())}drawDrid(){if(this.ctx){const{width:t,height:e}=this.canvas,{color:i="#dddddd",space:n=100,width:o=.5,type:s="point",stepX:r=20,stepY:l=20}=this.gradConfig;if(this.ctx.save(),this.ctx.strokeStyle=i,"line"===s){this.ctx.lineWidth=o;for(let i=-n;i<t+n;i+=r)this.ctx.beginPath(),this.ctx.moveTo(i,0),this.ctx.lineTo(i,e+n),this.ctx.closePath(),this.ctx.stroke();for(let i=-n;i<e+n;i+=l)this.ctx.beginPath(),this.ctx.moveTo(0,i),this.ctx.lineTo(t+n,i),this.ctx.closePath(),this.ctx.stroke()}else for(let s=-n;s<t+n;s+=r)for(let t=-n;t<e+n;t+=l)this.ctx.beginPath(),this.ctx.arc(s,t,o,0,Math.PI),this.ctx.fillStyle=i,this.ctx.fill(),this.ctx.closePath(),this.ctx.stroke();this.ctx.restore()}}}},function(t,e,i){"use strict";i.r(e),e.default="data:image/png;base64,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"},function(t,e,i){"use strict";i.r(e),function(t){var i=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var i=-1;return t.some((function(t,n){return t[0]===e&&(i=n,!0)})),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var i=t(this.__entries__,e),n=this.__entries__[i];return n&&n[1]},e.prototype.set=function(e,i){var n=t(this.__entries__,e);~n?this.__entries__[n][1]=i:this.__entries__.push([e,i])},e.prototype.delete=function(e){var i=this.__entries__,n=t(i,e);~n&&i.splice(n,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,n=this.__entries__;i<n.length;i++){var o=n[i];t.call(e,o[1],o[0])}},e}()}(),n="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o=void 0!==t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),s="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var r=["top","right","bottom","left","width","height","size","weight"],l="undefined"!=typeof MutationObserver,h=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var i=!1,n=!1,o=0;function r(){i&&(i=!1,t()),n&&h()}function l(){s(r)}function h(){var t=Date.now();if(i){if(t-o<2)return;n=!0}else i=!0,n=!1,setTimeout(l,e);o=t}return h}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){n&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){n&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=void 0===e?"":e;r.some((function(t){return!!~i.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),a=function(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var o=n[i];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},c=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||o},d=y(0,0,0,0);function u(t){return parseFloat(t)||0}function f(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce((function(e,i){return e+u(t["border-"+i+"-width"])}),0)}function v(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return d;var n=c(t).getComputedStyle(t),o=function(t){for(var e={},i=0,n=["top","right","bottom","left"];i<n.length;i++){var o=n[i],s=t["padding-"+o];e[o]=u(s)}return e}(n),s=o.left+o.right,r=o.top+o.bottom,l=u(n.width),h=u(n.height);if("border-box"===n.boxSizing&&(Math.round(l+s)!==e&&(l-=f(n,"left","right")+s),Math.round(h+r)!==i&&(h-=f(n,"top","bottom")+r)),!function(t){return t===c(t).document.documentElement}(t)){var a=Math.round(l+s)-e,v=Math.round(h+r)-i;1!==Math.abs(a)&&(l-=a),1!==Math.abs(v)&&(h-=v)}return y(o.left,o.top,l,h)}var g="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof c(t).SVGGraphicsElement}:function(t){return t instanceof c(t).SVGElement&&"function"==typeof t.getBBox};function x(t){return n?g(t)?function(t){var e=t.getBBox();return y(0,0,e.width,e.height)}(t):v(t):d}function y(t,e,i,n){return{x:t,y:e,width:i,height:n}}var w=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=x(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),p=function(t,e){var i,n,o,s,r,l,h,c=(n=(i=e).x,o=i.y,s=i.width,r=i.height,l="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,h=Object.create(l.prototype),a(h,{x:n,y:o,width:s,height:r,top:o,right:n+s,bottom:r+o,left:n}),h);a(this,{target:t,contentRect:c})},b=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new i,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof c(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new w(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof c(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new p(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),C="undefined"!=typeof WeakMap?new WeakMap:new i,m=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=h.getInstance(),n=new b(e,i,this);C.set(this,n)};["observe","unobserve","disconnect"].forEach((function(t){m.prototype[t]=function(){var e;return(e=C.get(this))[t].apply(e,arguments)}}));var E=void 0!==o.ResizeObserver?o.ResizeObserver:m;e.default=E}.call(this,i(6))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){var n=i(8),o=i(9);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var s={insert:"head",singleton:!1};n(o,s);t.exports=o.locals||{}},function(t,e,i){"use strict";var n,o=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},s=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),r=[];function l(t){for(var e=-1,i=0;i<r.length;i++)if(r[i].identifier===t){e=i;break}return e}function h(t,e){for(var i={},n=[],o=0;o<t.length;o++){var s=t[o],h=e.base?s[0]+e.base:s[0],a=i[h]||0,c="".concat(h," ").concat(a);i[h]=a+1;var d=l(c),u={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(r[d].references++,r[d].updater(u)):r.push({identifier:c,updater:x(u,e),references:1}),n.push(c)}return n}function a(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var o=i.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var r=s(t.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(e)}return e}var c,d=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function u(t,e,i,n){var o=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=d(e,o);else{var s=document.createTextNode(o),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(s,r[e]):t.appendChild(s)}}function f(t,e,i){var n=i.css,o=i.media,s=i.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),s&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var v=null,g=0;function x(t,e){var i,n,o;if(e.singleton){var s=g++;i=v||(v=a(e)),n=u.bind(null,i,s,!1),o=u.bind(null,i,s,!0)}else i=a(e),n=f.bind(null,i,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=o());var i=h(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<i.length;n++){var o=l(i[n]);r[o].references--}for(var s=h(t,e),a=0;a<i.length;a++){var c=l(i[a]);0===r[c].references&&(r[c].updater(),r.splice(c,1))}i=s}}}},function(t,e,i){(e=i(10)(!1)).push([t.i,".flow-reset-btn {\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  z-index: 99;\n  color: #fff;\n  background: #499af2;\n  border-color: #499af2;\n  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.12);\n  -webkit-box-shadow: 0 0.10417vw 0 rgba(0, 0, 0, 0.045);\n  box-shadow: 0 0.10417vw 0 rgba(0, 0, 0, 0.045);\n}\n.flow-line-btn {\n  position: absolute;\n  top: 20px;\n  left: 20px;\n  z-index: 99;\n  color: #fff;\n  background: #499af2;\n  border-color: #499af2;\n  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.12);\n  -webkit-box-shadow: 0 0.10417vw 0 rgba(0, 0, 0, 0.045);\n  box-shadow: 0 0.10417vw 0 rgba(0, 0, 0, 0.045);\n}\n.flow-btn {\n  padding: 4px 6px;\n  font-size: 11px;\n  border-radius: 2px;\n  cursor: pointer;\n  user-select: none;\n}\n",""]),t.exports=e},function(t,e,i){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var o=(r=n,l=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),h="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(h," */")),s=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[i].concat(s).concat([o]).join("\n")}var r,l,h;return[i].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,n){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(n)for(var s=0;s<this.length;s++){var r=this[s][0];null!=r&&(o[r]=!0)}for(var l=0;l<t.length;l++){var h=[].concat(t[l]);n&&o[h[0]]||(i&&(h[2]?h[2]="".concat(i," and ").concat(h[2]):h[2]=i),e.push(h))}},e}}])}));